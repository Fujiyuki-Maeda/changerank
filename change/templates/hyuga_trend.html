<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ shop_name }} å£²ä¸Šæ§‹æˆæ¯”æ¨ç§»</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: #f4f4f9; padding: 20px; color: #333; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; }
        .nav-links { margin-bottom: 20px; }
        .nav-links a { text-decoration: none; color: #6c757d; font-weight: bold; padding: 5px 10px; background: #eee; border-radius: 5px; }
        .chart-container { position: relative; height: 60vh; width: 100%; }
    </style>
</head>
<body>

<div class="container">
    <div class="nav-links"><a href="{% url 'dashboard' %}">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a></div>
    
    <h1>ğŸ  {{ shop_name }} å£²ä¸Šæ§‹æˆæ¯”æ¨ç§» (10å¹´åˆ†)</h1>
    
    {% if error %}
        <p style="color: red; text-align: center;">{{ error }}</p>
    {% else %}
        <div class="chart-container">
            <canvas id="hyugaChart"></canvas>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const labels = {{ labels|safe }};
                const datasets = {{ datasets|safe }};
                
                const ctx = document.getElementById('hyugaChart').getContext('2d');
                
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                stacked: true, // ç©ã¿ä¸Šã’
                            },
                            y: {
                                stacked: true, // ç©ã¿ä¸Šã’
                                beginAtZero: true,
                                max: 100,
                                title: { display: true, text: 'æ§‹æˆæ¯” (%)' }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.parsed.y + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            });
        </script>
    {% endif %}
</div>

</body>
</html>